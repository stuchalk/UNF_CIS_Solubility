<!-- incoming variables from publications (volumes) controller: vol, syss -->
{% extends 'base.html' %}
{% load static %}
{% block title %} Report View {% endblock %}
{% block content %}
<div class="row">
    <div class="col-12 mb-2 mt-2">
        <h3 class="text-center text-primary">Solubility System: {{ vol.name }} from Vol. {{ vol.volume }}</h3>
    </div>
    <div class="col-6">
        <div class="card card-success">
            <div class="card-header font-weight-bold">Metadata</div>
            <div class="card-body">
                <h5>Components:</h5>
                <p>{% for chem in chems %}
                    ({{ chem.compnum }}) {{ chem.substance.name }},
                    {% autoescape off %}{{ chem.substance.formula_html }}{% endautoescape %}; [{{ chem.substance.casno }}]
                    <a href="https://webbook.nist.gov/cgi/cbook.cgi?ID={{ chem.substance.casno }}" target="_blank">
                        NIST WebBook</a>
                    {% if not forloop.last %}<br/>{% endif %}
                {% endfor %}</p>
                <h5>Original Measurements</h5>
                <p>{% for ref in refs %}
                    {% if ref.type == 'original' %}
                        <a href="{{ ref.reference.url }}">{{ ref.reference.citation }}</a>
                        {% if not forloop.last %}<br/>{% endif %}
                    {% endif %}
                {% endfor %}</p>
                {% if vars|length > 0 %}
                    <h5>Variables:</h5>
                    <p>{{ vars }}</p>
                {% endif %}
                <h5>Prepared by:</h5>
                <p>{% for cmplr in cmplrs %}
                    {% if cmplr.role == 'compiler' %}
                        {{ cmplr.author.name }}
                        {% if not forloop.last %}<br/>{% endif %}
                    {% endif %}
                {% endfor %}</p>
                <h5>Method/Apparatus/Procedure:</h5>
                <p class="text-justify">{% if method|length > 0 %}
                    {{ method }}
                {% else %}
                    NA
                {% endif %}</p>
                <h5>So urce and Purity of Materials:</h5>
                <p>{% for chem in chems %}
                    ({{ chem.compnum }}) {{ chem.purity }}
                    {% if not forloop.last %}<br/>{% endif %}
                {% endfor %}</p>
                </div>
        </div>
    </div>
    <div class="col-6">
        <div class="card card-info">
            <div class="card-header font-weight-bold">Experimental Data</div>
            <div class="card-body">
                {% if series|length > 0 %}
                    <h4>Table 1</h4>
                    <div class="table table-striped"></div>
                {% endif %}
                {% if points|length > 0 %}
                    <h4>Datapoints</h4>
                    {% for point in points %}
                        {% with num=forloop.counter %}
                            <h5>Point {{ num }}</h5>
                            <ul>
                            {% for cond in point.conditions %}
                                <li>{{ cond.quantity.name }}: {{ cond.text }} {{ cond.unit.symbol }}</li>
                            {% endfor %}
                            {% for data in point.data %}
                                <li>{{ data.quantity.name }}: {{ data.text }} {{ data.unit.symbol }}</li>
                            {% endfor %}
                            </ul>
                        {% endwith %}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
    <div class="col-12">
        <pre> {% debug %} </pre>
    </div>
</div>
{% endblock %}